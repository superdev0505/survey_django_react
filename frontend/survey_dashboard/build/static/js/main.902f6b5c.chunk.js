(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{240:function(e,t,a){e.exports=a(443)},438:function(e,t,a){},441:function(e,t,a){},442:function(e,t,a){},443:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(17),o=a.n(i),s=a(8),c=a(9),l=a(12),u=a(11),d=a(13),m=a(39),f=a(453),p=a(451),h=a(452),g=a(66),E=a(454),v=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.user;return console.log("[USER]",t),!t.is_anonymous&&r.a.createElement(h.a,{activeKey:"/admin/home",className:"p-3 navbar-expand-lg bg-primary navbar-dark",onSelect:function(t){return e.props.history.push(t)}},t.is_superuser&&r.a.createElement(h.a.Item,null,r.a.createElement(h.a.Link,{href:"/users"},"Users")),t.is_superuser&&r.a.createElement(h.a.Item,null,r.a.createElement(h.a.Link,{href:"/metrics"},"Providers")),t.is_superuser&&r.a.createElement(h.a.Item,null,r.a.createElement(h.a.Link,{href:"/metrics/chart"},"System")),t.is_superuser&&r.a.createElement(h.a.Item,null,r.a.createElement(h.a.Link,{href:"/reports"},"Reports")),t.is_superuser&&r.a.createElement(h.a.Item,null,r.a.createElement(h.a.Link,{href:"/feedback"},"Feedbacks")),r.a.createElement(h.a.Item,null,r.a.createElement(h.a.Link,{href:"/tags"},"Questions")),r.a.createElement("div",{className:"flex-grow-1"}),r.a.createElement(h.a.Item,null,r.a.createElement(h.a.Link,null,t.username)))}}]),t}(r.a.Component),b=Object(g.a)(function(e){return{user:e.user}})(Object(E.a)(v)),y=function(e){return r.a.createElement("div",{className:"d-flex flex-column h-100"},r.a.createElement(b,null),r.a.createElement("div",{className:"flex-grow-1"},e.children))},S=a(153),k=a.n(S),C=function(){function e(){Object(s.a)(this,e)}return Object(c.a)(e,null,[{key:"trunc",value:function(e,t){return t&&(t.length>e?t.substr(0,e-1)+"...":t)}},{key:"formatDate",value:function(e){return e instanceof Date||(e=new Date(e)),e.getFullYear()+"-"+("0"+(e.getMonth()+1)).slice(-2)+"-"+("0"+e.getDate()).slice(-2)}},{key:"formatDateMonthTime",value:function(e){return("0"+(e.getMonth()+1)).slice(-2)+"-"+("0"+e.getDate()).slice(-2)+" "+("0"+e.getHours()).slice(-2)+":"+("0"+e.getMinutes()).slice(-2)}},{key:"formatDateTime",value:function(e){return e.getFullYear()+"-"+("0"+(e.getMonth()+1)).slice(-2)+"-"+("0"+e.getDate()).slice(-2)+"T"+("0"+e.getHours()).slice(-2)+":"+("0"+e.getMinutes()).slice(-2)}},{key:"formatDateT",value:function(e){return String(e).replace("T"," ").replace("Z","")}},{key:"formatDateTmills",value:function(e){return String(e).replace("T"," ").replace("Z","").replace(/\..+/,"")}},{key:"dayOfWeek",value:function(e){return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][e]}},{key:"monthOfYear",value:function(e){return["January","February","March","April","May","June","July","August","September","October","November","December"][e]}},{key:"sortByDateString",value:function(e,t){try{return new Date(e).getTime()-new Date(t).getTime()}catch(a){return-1}}},{key:"sortByNumberOrString",value:function(e,t){try{return"number"===typeof e&&"number"===typeof t?e-t:(e=String(e).toUpperCase())<(t=String(t).toUpperCase())?-1:e>t?1:0}catch(a){return-1}}},{key:"scrollToTop",value:function(){0!==window.scrollY&&setTimeout(function(){window.scrollTo(0,window.scrollY-30),e.scrollToTop()},10)}},{key:"isIP",value:function(t){return new RegExp(e.IP_REGEX).test(t)}},{key:"isMobile",value:function(){var e,t=!1;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(e.substr(0,4)))&&(t=!0),t}},{key:"htmlDecode",value:function(e){return String(e).replace(/lt/g,"<").replace(/gt/g,">").replace(/eq/g,"=").replace(/le/g,"<=").replace(/ge/g,">=")}},{key:"formatString",value:function(e,t){return e.replace(/{(\d+)}/g,function(e,a){return"undefined"!==typeof t[a]?t[a]:e})}},{key:"getColorByScore",value:function(t){return e.COLOR_GRADIENT[parseInt(t)]}},{key:"toPythonType",value:function(e,t){switch(t){case"int":return e=parseInt(e),isNaN(e)?0:Math.floor(e);case"float":return e=parseFloat(e),isNaN(e)?0:e;case"bool":return Boolean(e);case"list":return Array.from(JSON.parse(e));case"dict":return JSON.parse(e);default:return e}}},{key:"fromPythonType",value:function(e,t){switch(t){case"int":case"float":case"bool":return String(e);case"list":case"dict":return JSON.stringify(e);default:return e}}}]),e}();C.IP_REGEX="^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5]).){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$",C.debounce=function(e,t){var a;return function(){var n=this,r=arguments;clearTimeout(a),a=setTimeout(function(){return e.apply(n,r)},t)}},C.throttled=function(e,t){var a,n,r=[];return function(){var i=arguments;return r.push(e),function e(){if(!(n&&(new Date).getTime()-n<t))return n=(new Date).getTime(),a=r[0],r.shift(),a.apply(this,i);setTimeout(function(){return e()},t)}()}},C.downloadCSV=function(e,t){var a=document.createElement("a"),n=new Blob([e.join("\n")],{type:"text/csv;charset=utf-8;"});a.href=URL.createObjectURL(n),a.setAttribute("download",t||"report.csv"),a.click()};var O=a(6),_=a.n(O),w=a(19),T=a.n(w),j=a(48),L=a.n(j),N=a(36),D=a.n(N),R=a(28),x=a.n(R),A=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={filter:""},a.onSearchClick=function(e){13===e.keyCode&&a.props.loadQuestions(a.state.filter)},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.data,n=t.onItemClick,i=t.loadQuestions,o=t.questionsLoading,s=t.questionOffset,c=t.questionCount;this.state.filter;return r.a.createElement("div",{className:"h-100"},r.a.createElement(D.a,{className:"mb-3"},r.a.createElement(_.a.Control,{placeholder:"filter...",onKeyDown:this.onSearchClick,onChange:function(t){return e.setState({filter:t.target.value})}}),r.a.createElement(D.a.Append,null,r.a.createElement(T.a,{variant:"success",onClick:this.props.onAddQuestion},"+"))),o?r.a.createElement("div",{className:"p-5 d-flex align-items-center justify-content-center"},r.a.createElement("div",{className:"spinner-border",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading..."))):r.a.createElement(k.a,{defaultActiveKey:"#link1"},a.map(function(e){return r.a.createElement(k.a.Item,{key:e.id,action:!0,onClick:function(){return n(e)}},r.a.createElement("div",{className:"d-flex"},r.a.createElement("div",{className:"flex-grow-1"},C.trunc(50,e.text)),r.a.createElement("div",null,(!e.text||!!e.choice_set.filter(function(e){return!e.text}).length)&&r.a.createElement(x.a,{variant:"danger"},"Wrong"),!e.enabled&&r.a.createElement(x.a,{variant:"secondary"},"Disabled"))))})),r.a.createElement(L.a,null,r.a.createElement(L.a.Prev,{onClick:function(){return i(!1,!1,!0)}}),r.a.createElement(L.a.Item,null,"from ",s," to ",s+100," of ",c),r.a.createElement(L.a.Next,{onClick:function(){return i(!1,!0)}})))}}]),t}(r.a.Component),U=a(220),I=a.n(U),q={"Content-Type":"application/json"},F=function(){function e(){Object(s.a)(this,e)}return Object(c.a)(e,null,[{key:"fetch",value:function(e){function t(t,a,n,r){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(t,a,n,r){var i=r||t.url,o={credentials:"same-origin",method:t.method||"get",headers:Object.assign(q,{"X-CSRFToken":I.a.get("csrftoken")})};return"post"===o.method||"delete"===o.method?o.body=JSON.stringify(a):a&&(i=e.getUrlWithParams(r||t.url,a)),fetch(i,o).then(function(e){switch(e.status){case 401:return window.location="/login";case 404:throw new Error("Not found");case 500:throw new Error("Server Error")}return n?e.text():e.json()}).catch(function(e){return console.error(e)})})},{key:"getUrlWithParams",value:function(e,t){return e+"?"+Object.keys(t).reduce(function(e,a){return e.push(a+"="+encodeURIComponent(t[a])),e},[]).join("&")}}]),e}();F.THROTTLE_TIMEOUT=300,F.fetchThrottled=C.throttled(F.fetch,F.THROTTLE_TIMEOUT),F.TAGS={method:"get",url:"/api/tags"},F.TAGS_ADD={method:"post",url:"/api/tags/add"},F.QUESTIONS={method:"get",url:"/api/questions"},F.QUESTIONS_SAVE={method:"post",url:"/api/questions/save"},F.QUESTIONS_DELETE={method:"delete",url:"/api/questions/delete"},F.ANSWER_TYPES={method:"get",url:"/api/answer_types"},F.USER_PROFILE={method:"get",url:"/api/user/profile"},F.USER_LOGIN={method:"post",url:"/api/user/login"},F.USER_LIST={method:"get",url:"/api/users/"},F.USER_LIST_BLOCK_USER={method:"post",url:"/api/user/block/"},F.USER_SURVEY_LIST={method:"get",url:"/api/user/survey"},F.USER_SURVEY_ANSWER_LIST={method:"get",url:"/api/user/survey/answers"},F.PROVIDERS={method:"get",url:"/api/providers"},F.METRICS={method:"post",url:"/api/metrics"},F.METRICS_DATE={method:"get",url:"/api/metrics/date"},F.METRICS_CHART={method:"get",url:"/api/metrics/chart"},F.USER_BLOCKS={method:"get",url:"/api/userblock"},F.USER_FEEDBACK={method:"get",url:"/api/user/feedback_list"},F.USER_FEEDBACK_AGGREGATED={method:"get",url:"/api/user/feedback_list_aggregated"},F.REPORT_COUNTRIES={method:"post",url:"/api/report/countries"},F.REPORT_COUNTRY_AMOUNTS={method:"get",url:"/api/report/country_amounts"};var M,P=Object(E.a)(F),Q=a(29),B=a(221),G=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={options:[],defaultSelected:[]},a.onTagChange=function(e){var t=a.props.onTagChange,n=e.find(function(e){return e.customOption});if(!n)return t(e);P.fetch(P.TAGS_ADD,{text:n.text}).then(function(n){t(e.map(function(e){return{text:e.text,id:e.customOption&&e.text===n.text?n.id:e.id}})),a.setState({defaultSelected:e})})},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.state.options,a=this.props,n=a.id,i=a.defaultSelected;return r.a.createElement(B.AsyncTypeahead,{id:n,defaultSelected:i,labelKey:"text",multiple:!0,allowNew:!0,className:"tags-field",onChange:this.onTagChange,placeholder:"Add tags...",options:t,onSearch:function(t){e.setState({isLoading:!0}),P.fetch(P.TAGS,{search:t}).then(function(t){return e.setState({isLoading:!1,options:t.results})})}})}}]),t}(r.a.Component),Y=a(154),V=a.n(Y),z=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={id:"",enabled:!1,allTags:[],text:"",answerType:"",tags:[],choiceSet:[],showAlert:!1,errorText:""},a.onAddAnswer=function(){var e=a.state.choiceSet;a.setState({choiceSet:e.concat([{tags:[],text:"",isNew:!0,id:"tempChoice-"+(1e4*Math.random()).toFixed()}])})},a.onSaveQuestion=function(e){var t=a.state,n=t.id,r=t.text,i=t.tags,o=t.choiceSet,s=t.answerType,c=t.enabled;e.preventDefault(),P.fetch(P.QUESTIONS_SAVE,{id:n,text:r,tags:i,choice_set:o.map(function(e){return e.isNew?{tags:e.tags,text:e.text}:e}),answer_type:s,enabled:c}).then(function(e){if(e.error)return a.setState({errorText:e.error},function(){setTimeout(function(){return a.setState({errorText:""})},5e3)});a.setState({showAlert:!0},function(){setTimeout(function(){return a.setState({showAlert:!1})},2e3),a.props.onSaveQuestion()})}).catch(function(e){a.setState({errorText:e})})},a.onDeleteQuestion=function(){P.fetch(P.QUESTIONS_DELETE,{id:a.state.id}).then(function(){return a.props.onDeleteQuestion()})},a.onFieldUpdate=function(e){if(console.log("[AAAA]",e.target.name,e.target.value),"checkbox"===e.target.type)return a.setState(Object(Q.a)({},e.target.name,e.target.checked));a.setState(Object(Q.a)({},e.target.name,e.target.value))},a.onChoiceTagChange=function(e,t){var n=a.state.choiceSet.map(function(a){return e.id===a.id?(a.tags=t,a):a});a.setState(n)},a.onChoiceTextChange=function(e,t){var n=a.state.choiceSet.map(function(a){return e.id===a.id?(a.text=t,a):e});a.setState(n)},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.propsToState(this.props.data)}},{key:"componentDidUpdate",value:function(e){console.log("component did update",e),this.props.data.id!==e.data.id&&this.propsToState(this.props.data)}},{key:"propsToState",value:function(e){var t=e.id,a=e.text,n=e.tags,r=e.answer_type,i=e.choice_set,o=e.enabled;this.setState({id:t,text:a||"",tags:n||[],enabled:o||!1,choiceSet:i||[],answerType:r||"vote"})}},{key:"render",value:function(){var e=this,t=this.state,a=t.text,n=t.tags,i=t.answerType,o=t.choiceSet,s=t.showAlert,c=t.id,l=t.enabled,u=t.errorText,d=this.props.answerTypes;return r.a.createElement(_.a,{className:"p-3"},r.a.createElement("h4",null,"Question text"),r.a.createElement(_.a.Group,{controlId:"questionText"},r.a.createElement(_.a.Control,{type:"text",rows:"3",name:"text",value:a,onChange:this.onFieldUpdate})),r.a.createElement("div",{key:"question-tags-o-"+c},r.a.createElement(_.a.Group,{key:"question-tags-"+c},r.a.createElement(G,{id:"question-tags-"+c,defaultSelected:n,onTagChange:function(t){return e.setState({tags:t})}}))),r.a.createElement(_.a.Group,null,r.a.createElement(_.a.Label,null,"Answer type"),r.a.createElement(_.a.Control,{as:"select",className:"w-25",name:"answerType",value:i,onChange:this.onFieldUpdate},d.map(function(e){return r.a.createElement("option",{value:e,key:e},e)}))),r.a.createElement(_.a.Group,null,r.a.createElement(_.a.Check,{type:"checkbox",controlId:"questionEnabled",label:"Question Enabled",name:"enabled",checked:l,onChange:this.onFieldUpdate})),r.a.createElement("br",null),r.a.createElement("h4",null,"Answers"),r.a.createElement("div",null,o&&o.map(function(t){return r.a.createElement("div",{key:t.id},r.a.createElement(_.a.Group,null,r.a.createElement(_.a.Control,{className:"w-75",type:"text",placeholder:"Answer",defaultValue:t.text,onChange:function(a){return e.onChoiceTextChange(t,a.target.value)}}),r.a.createElement(G,{id:"tags-"+t.id,defaultSelected:t.tags,onTagChange:function(a){return e.onChoiceTagChange(t,a)}})))})),r.a.createElement("div",{className:"d-flex justify-content-between w-75 mb-5"},r.a.createElement(T.a,{variant:"primary",onClick:this.onAddAnswer},"Add Answer"),r.a.createElement("div",null,r.a.createElement(T.a,{variant:"danger",className:"mr-3",onClick:this.onDeleteQuestion},"Delete"),r.a.createElement(T.a,{variant:"success",onClick:this.onSaveQuestion},"Save"))),s&&r.a.createElement(V.a,{variant:"success",className:"w-25 m-2"},r.a.createElement("p",null,"Question was successfully saved!")),u&&r.a.createElement(V.a,{variant:"danger",className:"w-25 m-2"},r.a.createElement("p",null,u)))}}]),t}(r.a.Component),K=(a(413),function(e){return{type:"USER_RESULTS",user:e}}),H=function(e){return{type:"USER_LIST_LOADING",userList:e}},J=function(e){return{type:"USERS_RESULTS",userList:e}},W=function(){return{type:"METRICS_LOADING"}},X=function(e){return{type:"METRICS",metrics:e}},Z=function(e){return{type:"QUESTIONS_LIST_RESULT",questionList:e}},$=function(e){return{type:"USER_FEEDBACK",feedbackList:e}},ee=function(e){return{type:"USER_FEEDBACK_AGGREGATED",feedbackAggregatedList:e}},te=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={data:[],activeItem:null,answerTypes:[]},a.loadAnswerTypes=function(){P.fetch(P.ANSWER_TYPES).then(function(e){return a.setState({answerTypes:e.map(function(e){return e[0]})})})},a.onDeleteQuestion=function(){a.props.loadQuestions(),a.props.questionSelectEdit()},a.onAddQuestion=function(){return a.props.questionSelectEdit({id:null,text:"",tags:[],choice_set:[]})},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.loadAnswerTypes(),this.props.loadQuestions()}},{key:"render",value:function(){var e=this,t=this.state.answerTypes,a=this.props,n=a.questionList,i=a.questionActiveItem;return console.log("questionActiveItem",i),r.a.createElement("div",{className:"d-flex h-100"},r.a.createElement("div",{className:"w-25 p-2"},r.a.createElement(A,Object.assign({},this.props,{data:n,onAddQuestion:this.onAddQuestion,onItemClick:function(t){return e.props.questionSelectEdit(t)}}))),r.a.createElement("div",{className:"flex-grow-1"},i&&r.a.createElement(z,{data:i,id:i.id,answerTypes:t,onDeleteQuestion:this.onDeleteQuestion,onSaveQuestion:this.props.loadQuestions})))}}]),t}(r.a.Component),ae=Object(g.a)(function(e){return{questionList:e.questions.questionList,questionCount:e.questions.questionCount,questionOffset:e.questions.questionOffset,questionsLoading:e.questions.questionsLoading,questionActiveItem:e.questions.questionActiveItem}},function(e){return{loadQuestions:function(t,a,n){return e(function(e,t,a){return function(n,r){var i=r().questions,o=i.questionNext,s=i.questionPrevious,c=i.questionOffset,l=null,u=null;return t?l=o:a?l=s:u=e?{search:e}:{offset:c},n({type:"QUESTIONS_LIST_REQUEST"}),P.fetch(P.QUESTIONS,u,!1,l).then(function(e){return n(Z(e||{}))})}}(t,a,n))},questionSelectEdit:function(t){return e({type:"QUESTION_SELECT_EDIT",questionActiveItem:t})}}})(te),ne=a(222),re=a.n(ne),ie=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.skip,a=e.size,n=e.total,i=e.onPrevClick,o=e.onNextClick,s=t+a;return s>n&&(s=n),r.a.createElement(L.a,null,r.a.createElement(L.a.Prev,{onClick:function(){return i(t-a<=0?0:t-a)}}),t," of ",n,r.a.createElement(L.a.Next,{onClick:function(){return o(t+a>n?n:a)}}))}}]),t}(r.a.Component),oe=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={sortField:"",sortDesc:""},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"onHeaderClick",value:function(e){this.setState({sortDesc:!this.state.sortDesc,sortField:e.sortField||e.field})}},{key:"render",value:function(){var e=this,t=this.props,a=t.data,n=t.onRowClick,i=t.onCellClick,o=t.onHeaderClick,s=t.rowColumnStyle,c=t.config,l=t.tableClassName,u=t.serverPaging,d=this.state,m=d.sortField,f=d.sortDesc;return m&&(a=a.sort(function(e,t){return e=e[m],t=t[m],Number(e)>=0&&(e=Number(e),t=Number(t)),console.log("[SORT]",typeof e,typeof t),e===t?0:e<t!==f?-1:1})),c=c.filter(function(e){return!e.hidden}),r.a.createElement("div",{className:l},r.a.createElement(re.a,{selectable:!0,onCellClick:i},r.a.createElement("thead",null,r.a.createElement("tr",null,c.map(function(t,a){return r.a.createElement("th",{key:a,onClick:function(){return o?o(t):e.onHeaderClick(t)},style:{width:t.width,cursor:"pointer"}},r.a.createElement("span",null,t.name,t.field!==e.state.sortField?"":e.state.sortDesc?r.a.createElement("i",{className:"fa fa-angle-up"}):r.a.createElement("i",{className:"fa fa-angle-down"})))}))),r.a.createElement("tbody",null,a.map(function(e,t){return r.a.createElement("tr",{key:t,style:{cursor:"pointer"},onClick:function(t){return n&&n(e,t)}},c.map(function(a,n){return r.a.createElement("td",{key:n,style:Object.assign({width:a.width},s,a.style)},"function"===typeof a.field?a.field(e,t):e[a.field])}))}))),u&&r.a.createElement(ie,this.props))}}]),t}(r.a.Component),se=a(107),ce=a.n(se),le=a(69),ue=a.n(le),de=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.open,a=e.title,n=e.text,i=e.handleClose,o=e.handleSubmit,s=e.scrollable,c=e.dialogClassName,l=e.style;return r.a.createElement(ue.a,{show:t,onHide:i,scrollable:s,dialogClassName:c,style:l},r.a.createElement(ue.a.Header,{closeButton:!0},r.a.createElement(ue.a.Title,null,a)),r.a.createElement(ue.a.Body,null,n),r.a.createElement(ue.a.Footer,null,r.a.createElement(T.a,{variant:"secondary",onClick:i},"No"),r.a.createElement(T.a,{variant:"primary",onClick:o},"Yes")))}}]),t}(r.a.Component),me=a(155),fe=a.n(me),pe=a(156),he=a.n(pe),ge=function(e){return r.a.createElement("div",{className:"m-3"},r.a.createElement(oe,{data:e.data.fingerprint.map(function(e){return Object.assign({date:e.date},e.fingerprint)}),toolbarText:"Surveylist",serverPaging:!0,onRowClick:function(){},config:[{name:"date",field:function(e){return C.formatDateTmills(e.date)}},{name:"userAgent",field:"userAgent"},{name:"screenResolution",field:function(e){return e.screenResolution.join("x")}},{name:"availableScreenResolution",field:function(e){return e.availableScreenResolution.join("x")}},{name:"timezoneOffset",field:"timezoneOffset"},{name:"timezone",field:"timezone"},{name:"language",field:"language"},{name:"colorDepth",field:"colorDepth"},{name:"deviceMemory",field:"deviceMemory"},{name:"fonts",field:function(e){return e.fonts.join(",")}},{name:"touchSupport",field:function(e){return String(e.touchSupport)}},{name:"hardwareConcurrency",field:"hardwareConcurrency"},{name:"webglVendorAndRenderer",field:function(e){return String(e.webglVendorAndRenderer)}},{name:"sessionStorage",field:function(e){return String(e.sessionStorage)}},{name:"localStorage",field:function(e){return String(e.localStorage)}},{name:"indexedDb",field:function(e){return String(e.indexedDb)}},{name:"addBehavior",field:function(e){return String(e.addBehavior)}},{name:"openDatabase",field:function(e){return String(e.openDatabase)}},{name:"cpuClass",field:"cpuClass"},{name:"platform",field:"platform"},{name:"plugins",field:"plugins"},{name:"audio",field:"audio"},{name:"adBlock",field:function(e){return String(e.adBlock)}},{name:"hasLiedLanguages",field:function(e){return String(e.hasLiedLanguages)}},{name:"hasLiedResolution",field:function(e){return String(e.hasLiedResolution)}},{name:"hasLiedOs",field:function(e){return String(e.hasLiedOs)}},{name:"hasLiedBrowser",field:function(e){return String(e.hasLiedBrowser)}}]}))},Ee=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).state={filter:"",filters:{activeLast24h:!0},ordering:"-survey_count",orderingDesc:!1,dialogOpen:!1,dialogTarget:{},fingerprintOpen:!1,fingerprintTarget:{}},a.loadUsers=function(){return a.props.loadUsers(a.state.filter,null,null,a.state.filters,a.state.ordering)},a.onSearchClick=function(e){13===e.keyCode&&a.loadUsers()},a.onFilterClick=function(e){var t=e.target.name,n=a.state.filters[t];a.setState({filters:Object.assign(a.state.filters,Object(Q.a)({},t,!n))},function(){console.log(a.state),a.loadUsers()})},a.onHeaderClick=function(e){var t="string"===typeof e.field?e.field:e.fieldOrdering||"",n=!a.state.orderingDesc;a.setState({ordering:(n?"-":"")+t,orderingDesc:n},function(){a.props.loadUsers(a.state.filter,null,null,a.state.filters,a.state.ordering)})},a.doBlockUser=function(){a.setState({dialogOpen:!1}),P.fetch(P.USER_LIST_BLOCK_USER,a.state.dialogTarget).then(a.loadUsers)},a.getStatus=function(e){return r.a.createElement("div",null,r.a.createElement("div",null,"currrent survey: ",e.current_survey&&e.current_survey.questionanswer_set.length||0," of 10"),r.a.createElement("div",null,"currrent survey created: ",e.current_survey&&C.formatDateTmills(e.current_survey.created)))},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.loadUsers()}},{key:"render",value:function(){var e=this,t=this.props,a=t.data,n=t.count,i=t.skip,o=t.size,s=t.loadUsers,c=t.offset,l=t.dataLoading,u=this.state,d=u.dialogOpen,m=u.dialogTarget,f=u.filters,p=u.fingerprintOpen,h=u.fingerprintTarget,g=m.ref_id,E=m.first_name,v=m.last_name,b={};return console.log("{FINGER!} ",h),r.a.createElement("div",{className:"m-3"},r.a.createElement(D.a,{className:"mb-3"},r.a.createElement(_.a.Control,{placeholder:"filter...",onKeyDown:this.onSearchClick,onChange:function(t){return e.setState({filter:t.target.value})}})),r.a.createElement("div",{className:"d-flex"},r.a.createElement(D.a,{className:"mb-3"},r.a.createElement(_.a.Check,{name:"activeLast24h",label:"Active last 24 hours",checked:f.activeLast24h,onClick:this.onFilterClick})),r.a.createElement(D.a,{className:"mb-3"},r.a.createElement(_.a.Check,{name:"onlyBots",label:"Only Bots",onClick:this.onFilterClick})),r.a.createElement(D.a,{className:"mb-3"},r.a.createElement(_.a.Check,{name:"onlyContradicting",label:"Only Contradicting",onClick:this.onFilterClick})),r.a.createElement(D.a,{className:"mb-3"},r.a.createElement(_.a.Check,{name:"blockedUsers",label:"Blocked Users",onClick:this.onFilterClick}))),l?r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement(ce.a,{animation:"border",role:"status",className:"ml-5 mt-4"},r.a.createElement("span",{className:"sr-only"},"Loading..."))):r.a.createElement(oe,{data:a,toolbarText:"Userlist",serverPaging:!0,size:o,skip:c,total:n,onHeaderClick:this.onHeaderClick,onRowClick:function(e,t){"button"!==t.target.type&&window.open("/users/"+e.id,"__blank")},onPrevClick:function(e){return s(!1,!1,!0)},onNextClick:function(e){return s(!1,!0)},onRowsCountChange:function(e){return s(i,e)},config:[{name:"RefId",field:"ref_id",style:b},{name:"Provider",fieldOrdering:"provider__name",field:function(e){return e.provider?e.provider.name:""},style:b},{name:"SubId",fieldOrdering:"provider_user_id",field:function(e){return C.trunc(8,e.provider_user_id)},style:b},{name:"Joined",fieldOrdering:"date_joined",field:function(e){return C.formatDateTmills(e.date_joined)},style:b},{name:"IPs",fieldOrdering:"ip_history",field:function(e){return r.a.createElement(fe.a,{trigger:"click",placement:"left",overlay:r.a.createElement(he.a,null,e.ip_history.map(function(e){return r.a.createElement("div",null,C.formatDateTmills(e.date)," - ",e.ip)}))},r.a.createElement(T.a,{variant:"outline-success"},"IPs - ",e.ip_history.length))}},{name:"Fingerprint",fieldOrdering:"fingerprint__count",field:function(t){return r.a.createElement(T.a,{onClick:function(){return e.setState({fingerprintOpen:!0,fingerprintTarget:t})},variant:"outline-success"},"FPs - ",t.fingerprint.length)}},{name:"Questions #",fieldOrdering:"survey__status",field:"survey_count"},{name:"Flags",fieldOrdering:"user_flags__date",field:function(e){var t=e.user_flags.reduce(function(e,t){return e[t.key]=(e[t.key]||0)+1,e},{});return Object.keys(t).map(function(e){return r.a.createElement(T.a,{variant:"primary"},e," ",r.a.createElement(x.a,{variant:"light"},t[e]))})}},{name:"Suspended",fieldOrdering:"user_ban_history__date",field:function(e){return e.user_ban_history&&!!e.user_ban_history.length&&r.a.createElement(fe.a,{trigger:"click",placement:"left",overlay:r.a.createElement(he.a,null,e.user_ban_history.map(function(e){return r.a.createElement("div",null,e.reason+" - "+C.formatDateTmills(e.suspend_till))}))},r.a.createElement(T.a,{variant:e.is_suspended?"danger":"outline-success"},e.is_suspended?"Suspended":"Suspend History"))}},{name:"Block user",fieldOrdering:"is_active",field:function(t){return r.a.createElement(T.a,{onClick:function(){return e.setState({dialogOpen:!0,dialogTarget:t})},variant:t.is_active?"outline-success":"danger"},t.is_active?"Block":"Unblock")}}]}),r.a.createElement(de,{open:d,text:"Are you sure want to ".concat(m.is_active?"BLOCK":"UNBLOCK"," user ").concat(g," - ").concat(E," ").concat(v," ?"),title:"Block User -  ".concat(E," ").concat(v," - ").concat(g),handleClose:function(){return e.setState({dialogOpen:!1})},handleSubmit:this.doBlockUser}),r.a.createElement(de,{scrollable:!0,dialogClassName:"modal-90w",open:p,title:"Fingerprint History - ".concat(h.ref_id),text:r.a.createElement(ge,{data:h}),handleClose:function(){return e.setState({fingerprintOpen:!1})},handleSubmit:function(){return e.setState({fingerprintOpen:!1})}}))}}]),t}(r.a.Component),ve=Object(m.a)(function(e){return{user:e.user,data:e.userList.results,count:e.userList.count,offset:e.userList.offset,dataLoading:e.userList.dataLoading}},function(e){return{loadUsers:function(t,a,n,r,i){return e(function(e,t,a,n,r){return function(i,o){i(H());var s=o().userList,c=s.userListNext,l=s.userListPrevious,u=s.userListOffset,d=null,m=null;return t?d=c:a?d=l:m=e||n||r?Object.assign({search:e},n,{ordering:r}):{offset:u||0},P.fetch(P.USER_LIST,m,!1,d).then(function(e){return i(J(e||{}))})}}(t,a,n,r,i))}}})(Ee),be=a(60),ye=a(61),Se=a.n(ye),ke=(a(437),function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={date:"",provider:"",providers:[]},a.componentDidMount=function(){a.loadProviders(),a.loadMetrics()},a.loadProviders=function(){P.fetch(P.PROVIDERS).then(function(e){return a.setState({providers:e})})},a.loadMetrics=function(){var e=a.state,t=e.provider,n=e.date;a.props.loadMetrics(n&&Se()(n).format("DD/MM/YYYY"),t)},a.handleProviderChange=function(e){a.setState({provider:e.target.value},a.loadMetrics)},a.handleDateChange=function(e){a.setState({date:e},a.loadMetrics)},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.metrics,a=e.metricsLoading,n=this.state,i=n.date,o=(n.provider,n.providers);return r.a.createElement("div",{className:"m-3"},r.a.createElement(_.a,{noValidate:!0},r.a.createElement(_.a.Row,null,r.a.createElement(_.a.Group,{className:"ml-1 mr-5"},r.a.createElement(_.a.Label,null,"Date"),r.a.createElement("div",null,r.a.createElement(be.a,{selected:i,className:"form-control",placeholderText:"Click to select a date",onChange:this.handleDateChange}))),r.a.createElement(_.a.Group,{controlId:"metrics.providerSelect"},r.a.createElement(_.a.Label,null,"Provider"),r.a.createElement(_.a.Control,{as:"select",onChange:this.handleProviderChange},r.a.createElement("option",{value:""},"All"),o.map(function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.name)}))),a&&r.a.createElement(_.a.Group,null,r.a.createElement(ce.a,{animation:"border",role:"status",className:"ml-5 mt-4"},r.a.createElement("span",{className:"sr-only"},"Loading..."))))),r.a.createElement("div",{className:"card border-primary mb-3"},r.a.createElement("div",{className:"card-header"},"Aggregation by day"),r.a.createElement("div",{className:"card-body"},r.a.createElement(oe,{data:t,config:[{name:"Date",field:"trdate"},{name:"Provider",field:function(e){return e.provider_name||"All"},sortField:"provider_name"},{name:"All survey",field:"all"},{name:"Started survey",field:"started"},{name:"Success survey",field:"success"},{name:"Success %",field:function(e){return Math.round(100*e.success/e.all)+"%"},sortField:"failed"},{name:"Contradicting",field:"is_contradicting"},{name:"Bot",field:"is_bot"},{name:"Changin IP",field:"is_changing_ip"},{name:"Zombie",field:"is_zombie"},{name:"Revenue",field:"sum"}]}))))}}]),t}(r.a.Component)),Ce=Object(m.a)(function(e){return{metrics:e.metrics.metrics||[],metricsLoading:e.metrics.metricsLoading}},function(e){return{loadMetrics:function(t,a){return e(function(e,t){return function(a){return a(W()),P.fetch(P.METRICS,{date:e,provider:t}).then(function(e){return a(X(e||{}))})}}(t,a))}}})(ke),Oe=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={data:[],date:null},a.loadSystemMetrics=function(){var e=a.props.match.params.date;P.fetch(P.METRICS_CHART,{date:e}).then(function(t){return a.setState({data:t,date:e})})},a.loadBlocks=function(){var e=a.props.match.params.date;P.fetch(P.METRICS,{date:e}).then(function(t){return a.setState({data:t,date:e})})},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.loadSystemMetrics()}},{key:"render",value:function(){var e=this.state,t=e.data;e.date;return r.a.createElement("div",{className:"m-3"},r.a.createElement(oe,{data:t,toolbarText:"Metrics list",onRowClick:function(e){},config:[{name:"Date",field:function(e){return C.formatDateTmills(e.date)}},{name:"Survey",field:"survey"},{name:"Questions",field:"questions"},{name:"Survey Success",field:"survey_success"},{name:"Survey Unsuccess",field:"survey_unsuccess"},{name:"Transaction",field:"transaction"},{name:"Users_registered",field:"users_registered"}]}))}}]),t}(r.a.Component),_e=(r.a.Component,function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.loadFeedbacks(),this.props.loadAggregatedFeedbacks()}},{key:"render",value:function(){var e=this.props,t=e.data,a=e.count,n=e.dataAggregated,i=e.skip,o=e.size,s=e.loadData,c={};return r.a.createElement("div",{className:"m-3"},r.a.createElement("div",{className:"card border-primary mb-3"},r.a.createElement("div",{className:"card-header"},"Aggregation by day"),r.a.createElement("div",{className:"card-body"},r.a.createElement(oe,{data:n,config:[{name:"Date",field:"date"},{name:"VPN Blocked",field:"blocked_vpn"},{name:"VPN Feedback",field:"feedback_vpn"},{name:"Adblock Blocked",field:"blocked_adblock"},{name:"Adblock Feedback",field:"feedback_adblock"}]}))),r.a.createElement("br",null),r.a.createElement("div",{className:"card border-primary mb-3"},r.a.createElement("div",{className:"card-header"},"All feedbacks "),r.a.createElement("div",{className:"card-body"},r.a.createElement(oe,{data:t,toolbarText:"Feedback List",serverPaging:!0,size:o,skip:i,total:a,onRowClick:function(){},onPrevClick:function(e){return s(e,o)},onNextClick:function(e){return s(e,o)},onRowsCountChange:function(e){return s(i,e)},config:[{name:"Date",field:"date",style:c},{name:"Type",field:"type",style:c},{name:"Text",field:"text",style:c},{name:"User",field:function(e){return r.a.createElement("span",null,e.user.first_name," - ",e.user.last_name)},style:c},{name:"Fingerprint",field:function(e){return C.trunc(250,e.fingerprint)},style:c}]}))))}}]),t}(r.a.Component)),we=Object(m.a)(function(e){return{user:e.user,data:e.feedbackList.results||[],count:e.feedbackList.count,dataAggregated:e.feedbackList.feedbackAggregatedList||[]}},function(e){return{loadFeedbacks:function(){return e(function(e){return P.fetch(P.USER_FEEDBACK).then(function(t){return e($(t||{}))})})},loadAggregatedFeedbacks:function(){return e(function(e){return P.fetch(P.USER_FEEDBACK_AGGREGATED).then(function(t){return e(ee(t||[]))})})}}})(_e),Te=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={countries:"",date_from:new Date,date_to:new Date,s_date_from:new Date,s_date_to:new Date},a.onSpecificCountriesDownloadClick=function(){var e=a.state,t=e.countries,n=e.s_date_from,r=e.s_date_to;P.fetch(P.REPORT_COUNTRIES,{countries:t,date_from:Se()(n).format("DD/MM/YYYY"),date_to:Se()(r).format("DD/MM/YYYY")}).then(C.downloadCSV)},a.onCountryReportDownloadClick=function(){var e=a.state,t=e.countries,n=e.date_from,r=e.date_to;r=Se()(r).format("DD/MM/YYYY"),n=Se()(n).format("DD/MM/YYYY"),a.setState({loading:!0}),P.fetch(P.REPORT_COUNTRY_AMOUNTS,{countries:t,date_from:n,date_to:r}).then(function(e){a.setState({loading:!1}),C.downloadCSV(e,"report_date_countries_".concat(n,"-").concat(r,".csv"))})},a.handleDateChange=function(e,t){a.setState(Object(Q.a)({},t,e))},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.date_from,n=t.date_to,i=t.s_date_from,o=t.s_date_to,s=(t.countries,t.loading);return r.a.createElement("div",{className:"m-3"},r.a.createElement("div",{className:"card border-primary mb-3"},r.a.createElement("div",{className:"card-header"},"Report by Date - Country - Mobile - Desktop, format CSV"),r.a.createElement("div",{className:"card-body"},r.a.createElement(_.a,{noValidate:!0},r.a.createElement(_.a.Row,null,r.a.createElement(_.a.Group,{className:"ml-1 mr-5"},r.a.createElement(_.a.Label,null,"Date From"),r.a.createElement("div",null,r.a.createElement(be.a,{selected:a,className:"form-control",placeholderText:"Click to select a date",onChange:function(t){return e.handleDateChange(t,"date_from")}}))),r.a.createElement(_.a.Group,{className:"ml-1 mr-5"},r.a.createElement(_.a.Label,null,"Date To"),r.a.createElement("div",null,r.a.createElement(be.a,{selected:n,className:"form-control",placeholderText:"Click to select a date",onChange:function(t){return e.handleDateChange(t,"date_to")}})))),r.a.createElement("div",{className:"d-flex justify-content-between w-75 my-1"},r.a.createElement(T.a,{variant:"primary",onClick:this.onCountryReportDownloadClick},"Download ",r.a.createElement("i",{className:"fa "+(s?"fa-sync fa-spin":"fa-download"),"aria-hidden":"true"})))))),r.a.createElement("div",{className:"card border-primary mb-3"},r.a.createElement("div",{className:"card-header"},"Report for specific provided countries, format CSV"),r.a.createElement("div",{className:"card-body"},r.a.createElement(_.a,{noValidate:!0},r.a.createElement(_.a.Row,null,r.a.createElement(_.a.Group,{className:"ml-1 mr-5"},r.a.createElement(_.a.Label,null,"Date From"),r.a.createElement("div",null,r.a.createElement(be.a,{selected:i,className:"form-control",placeholderText:"Click to select a date",onChange:function(t){return e.handleDateChange(t,"s_date_from")}}))),r.a.createElement(_.a.Group,{className:"ml-1 mr-5"},r.a.createElement(_.a.Label,null,"Date To"),r.a.createElement("div",null,r.a.createElement(be.a,{selected:o,className:"form-control",placeholderText:"Click to select a date",onChange:function(t){return e.handleDateChange(t,"s_date_to")}})))),r.a.createElement(_.a.Row,null,r.a.createElement(D.a,{className:"ml-1 my-1"},r.a.createElement(_.a.Control,{placeholder:"Countries",as:"textarea",rows:"3",onChange:function(t){return e.setState({countries:t.target.value})}}))),r.a.createElement("div",{className:"d-flex justify-content-between w-75 my-1"},r.a.createElement(T.a,{variant:"primary",onClick:this.onSpecificCountriesDownloadClick},"Download ",r.a.createElement("i",{className:"fa fa-download","aria-hidden":"true"})))))))}}]),t}(r.a.Component),je=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={login:"",password:""},a.onFieldChange=function(e){a.setState(Object(Q.a)({},e.target.name,e.target.value))},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.login,n=t.password;return r.a.createElement("div",{className:"container mt-5 w-25"},r.a.createElement("fieldset",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"exampleInputEmail1"},"Login"),r.a.createElement("input",{className:"form-control",onChange:this.onFieldChange,name:"login","aria-describedby":"emailHelp",placeholder:"Enter login"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"exampleInputPassword1"},"Password"),r.a.createElement("input",{type:"password",name:"password",onChange:this.onFieldChange,className:"form-control",placeholder:"Password"})),r.a.createElement("button",{className:"btn btn-default",onClick:function(){return e.props.loginUser(a,n)}},"Login")))}}]),t}(r.a.Component),Le=Object(m.a)(function(e){return{user:e.user}},function(e){return{loginUser:function(t,a){return e(function(e,t){return function(a){return P.fetch(P.USER_LOGIN,{login:e,password:t}).then(function(e){return window.location="/tags"})}}(t,a))}}})(je),Ne=(a(438),a(32)),De=a.n(Ne),Re=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={data:[],user:{},status:{}},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;P.fetch(P.USER_SURVEY_LIST,{user_id:this.props.match.params.user_id}).then(function(t){return e.setState({data:t.data,user:t.user,status:t.status.reduce(function(e,t){return Object.assign(e,Object(Q.a)({},t[1],t[0]))},{})})})}},{key:"render",value:function(){var e=this.state,t=e.data,a=e.user,n=e.status;return r.a.createElement("div",{className:"m-3"},r.a.createElement(De.a,null,r.a.createElement(De.a.Item,{href:"/users"},"Users"),r.a.createElement(De.a.Item,{active:!0},a.first_name," ",a.last_name," - ",a.ref_id)),r.a.createElement(oe,{data:t.reverse(),toolbarText:"Surveylist",serverPaging:!0,onRowClick:function(e){window.location="/users/"+a.id+"/"+e.id},config:[{name:"#",field:function(e,a){return t.length-a}},{name:"Created",sortField:"created",field:function(e){return C.formatDateT(e.created)}},{name:"Solved",sortField:"solved",field:function(e){return e?C.formatDateT(e.solved):""}},{name:"Status",sortField:"status",field:function(e){return r.a.createElement(x.a,{variant:"light"},n[e.status])}},{name:"Last Question",sortField:"current_question",field:function(e){return e.current_question.text}}]}))}}]),t}(r.a.Component),xe=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).state={data:[],user:{}},a.getChoiceField=function(e,t){return r.a.createElement("div",{key:"c"+t},r.a.createElement("div",null,e.text),r.a.createElement("div",null,e.tags.map(function(e){return r.a.createElement(x.a,{key:"ct"+t+e.id,variant:"light"},e.text)})))},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;P.fetch(P.USER_SURVEY_ANSWER_LIST,{survey_id:this.props.match.params.survey_id}).then(function(t){return e.setState({data:t.data,user:t.user})})}},{key:"render",value:function(){var e=this,t=this.state,a=t.data,n=t.user;return r.a.createElement("div",{className:"m-3"},r.a.createElement(De.a,null,r.a.createElement(De.a.Item,{href:"/users"},"Users"),r.a.createElement(De.a.Item,{href:"/users/"+n.id},n.first_name," ",n.last_name," - ",n.ref_id),r.a.createElement(De.a.Item,{active:!0},this.props.match.params.survey_id)),r.a.createElement(oe,{data:a.reverse(),toolbarText:"Surveylist",serverPaging:!0,onRowClick:function(e){},config:[{name:"#",field:function(e,t){return t+1}},{name:"Created",sortField:"created",field:function(e){return C.formatDateT(e.created)},style:{width:"350px"}},{name:"Question",sortField:"tags",field:function(e){return r.a.createElement("div",null,r.a.createElement("div",null,e.question.text),r.a.createElement("div",null,e.question.tags.map(function(t){return r.a.createElement(x.a,{key:"q"+e.question.id+t.id,variant:"light"},t.text)})))}},{name:"Answers",sortField:"tags",field:function(t){return t.choice.map(e.getChoiceField)}}]}))}}]),t}(r.a.Component),Ae=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){"/login"!==window.location.pathname&&this.props.loadUser()}},{key:"render",value:function(){return r.a.createElement(f.a,null,r.a.createElement(y,null,r.a.createElement(p.a,{exact:!0,path:"/",render:function(){return r.a.createElement(Le,null)}}),r.a.createElement(p.a,{exact:!0,path:"/login",render:function(){return r.a.createElement(Le,null)}}),r.a.createElement(p.a,{exact:!0,path:"/tags/",component:ae}),r.a.createElement(p.a,{exact:!0,path:"/metrics/",component:Ce}),r.a.createElement(p.a,{exact:!0,path:"/metrics/:date",component:Oe}),r.a.createElement(p.a,{exact:!0,path:"/users/",component:ve}),r.a.createElement(p.a,{exact:!0,path:"/users/:user_id",component:Re}),r.a.createElement(p.a,{exact:!0,path:"/users/:user_id/:survey_id",component:xe}),r.a.createElement(p.a,{exact:!0,path:"/reports/",component:Te}),r.a.createElement(p.a,{exact:!0,path:"/feedback/",component:we})))}}]),t}(r.a.Component),Ue=Object(m.a)(function(e){return{user:e.user}},function(e){return{loadUser:function(){return e(function(e){return P.fetch(P.USER_PROFILE).then(function(t){return e(K(t))})})}}})(Ae),Ie=(a(440),a(441),a(442),a(104)),qe=a(59),Fe=a(238),Me=a(239),Pe=a(24),Qe={dataLoading:!1},Be={metrics:[],metricsLoading:!1},Ge={count:0,next:null,previous:null,results:[],dataLoading:!1},Ye={dataLoading:!1,feedbackAggregatedList:[]},Ve={questionsLoading:!1,questionList:[],questionCount:0,questionOffset:0,questionNext:null,questionPrevious:null,questionActiveItem:null},ze=Object(qe.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qe,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.user;switch(a){case"USER_REQUEST":return Object(Pe.a)({},e,{dataLoading:!0});case"USER_RESULTS":return Object(Pe.a)({},e,n);default:return e}},metrics:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.metrics;switch(a){case"METRICS_LOADING":return Object(Pe.a)({},e,{metricsLoading:!0});case"METRICS":return Object(Pe.a)({},e,{metrics:n,metricsLoading:!1});default:return e}},userList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.userList;switch(a){case"USER_LIST_LOADING":return Object(Pe.a)({},e,{dataLoading:!0});case"USERS_RESULTS":return Object(Pe.a)({},e,n,{userListCount:t.userList.count,userListNext:t.userList.next,userListPrevious:t.userList.previous,userListOffset:t.userList.offset,userList:t.userList.results||[],userListLoading:!1,dataLoading:!1});default:return e}},feedbackList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ye,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.feedbackList,r=t.feedbackAggregatedList;switch(a){case"USER_FEEDBACK":return Object(Pe.a)({},e,n);case"USER_FEEDBACK_AGGREGATED":return Object(Pe.a)({},e,{feedbackAggregatedList:r});default:return e}},questions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"QUESTION_SELECT_EDIT":return Object(Pe.a)({},e,{questionActiveItem:t.questionActiveItem});case"QUESTIONS_LIST_REQUEST":return Object(Pe.a)({},e,{questionsLoading:!0});case"QUESTIONS_LIST_RESULT":return Object(Pe.a)({},e,{questionCount:t.questionList.count,questionNext:t.questionList.next,questionPrevious:t.questionList.previous,questionOffset:t.questionList.offset,questionList:t.questionList.results||[],questionsLoading:!1});default:return e}}}),Ke=Object(Me.createLogger)();o.a.render(r.a.createElement(Ie.a,{store:Object(qe.d)(ze,M,Object(qe.a)(Fe.a,Ke))},r.a.createElement(Ue,null)),document.getElementById("root"))}},[[240,1,2]]]);
//# sourceMappingURL=main.902f6b5c.chunk.js.map